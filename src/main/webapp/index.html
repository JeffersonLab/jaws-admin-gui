<html>
<body>
Hello
<div>
    <form onsubmit="return false;">
        Send: <input id="msg" type="text" name="data" value=""/>
        <input id="submit" type="button" value="Send"/>
    </form>
</div>
<ul></ul>
<p>
</p>
<script>
    let button = document.getElementById('submit');

    button.addEventListener("click", function(e) {
        let msg = document.getElementById("msg");

        let promise = fetch("proxy/rest", {
            method: "PUT",
            body: JSON.stringify({
                title: "foo",
                body: "bar",
                userId: 1
            }),
            headers: {
                "Content-type": "application/json; charset=UTF-8"
            }
        });

        msg.value = "";

    });
</script>
<ul></ul>
<script>
    var evtSource = new EventSource('proxy/sse');
    var eventList = document.querySelector('ul');

    console.log('attempting sse...')

    evtSource.addEventListener("registration", function(e) {
        console.log('message type message')
        var newElement = document.createElement("li");

        newElement.textContent = "message: " + e.data;
        eventList.appendChild(newElement);
    });

    evtSource.onerror = function(e) {
        console.log('error')
        console.log(e)
    }
</script>
</body>
</html>